<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0"
    />
    <title>name</title>
    <!-- <script src="lib2/template-web.js"></script>
    <script src="lib2/element.js"></script>
    <script src="lib2/fastdom.js"></script>
    <script src="lib2/queryhelp.js"></script>
    <script src="lib2/analyzeHtml.js"></script> -->
  </head>

  <body>
    <div>
      <ul>
        <li>
          <a href="#">1</a>
        </li>
        <li>
          <a href="#" class="b d e f" id="c" custom="a b [href]">2</a>
        </li>
      </ul>
      <div>1</div>
    </div>
    <block
      source="{'name':'Krasimir\' Tsonev', 'profile':{'age':2}, 'class2':'t1'}"
      id="b1"
      :class="$imports.query('a')"
    >
      <div :class="class2" :name="name">{{ name }}</div>
      <%if(profile.age>1){%>
      <span>{{ profile.age }}</span>
      <%}%>
      <block
        source="{'name':'Krasimir Tsonev2','profile':{'age':1}, 'class1':'t2'}"
      >
        <div :class="class1" :id="$imports.query('a')">
          {{ name }}-{{ $imports.query("a") }}-{{ $imports.path(0) }}-{{
          $imports.data("b1").class2 }}
        </div>
        <%if(profile.age>1){%>
        <span>{{ profile.age }}</span>
        <%}%>
      </block>
      123
      <block
        source="{'name':'Krasimir Tsonev3','profile':{'age':1}, 'class1':'t3'}"
      >
        <div :class="class1" :id="$imports.query('a')">
          {{ name }}-{{ $imports.query("a") }}-{{ $imports.path(0) }}-{{
          $imports.data("b1").class2 }}
        </div>
        <%if(profile.age>1){%>
        <span>{{ profile.age }}</span>
        <%}%>
        <block
          source="{'name':'Krasimir Tsonev4','profile':{'age':1}}"
          src="/include/_body.html"
        ></block>
      </block>
    </block>
    <block
      source="{'name':'Krasimir Tsonev5','profile':{'age':1}, 'class1':'t2'}"
      wait="b1"
    >
      <div :class="class1" :id="$imports.query('a')">
        {{ name }}-{{ $imports.query("a") }}-{{ $imports.path(0) }}-{{
        $imports.data("b1").class2 }}
      </div>
      <%if(profile.age>1){%>
      <span>{{ profile.age }}</span>
      <%}%>
    </block>
    <block src="/include/_other.html"></block>
    <script>
      //template.defaults.escape = false;
      /* template.defaults.rules.push({
        test: /\${([\w\W]*?)}/,
        use: function(match, code) {
          return {
            code: code,
            output: 'escape'
          };
        }
      }); */
      /* template.defaults.rules.push({
        ///<.*? +(:[\w]*?="(.*?)")>/g
        test: /:[\w]*?="(.*?)"/g,
        use: function(match, code) {
          var key = /:([\w]*?)=/g.exec(match)[1];
          console.log(match, key, code);
          return {
            code: key + '="' + code + '"',
            output: 'raw'
          };
        }
      }); */
      /* var dom = new fastdom(document.body.outerHTML);
      var el1 = dom.querySelector('li a');
      var el2 = dom.querySelector('div li a#c.b[custom].d.e.f:not([custom=c])');
      var el3 = dom.querySelector('div'); //All
      console.log(el1.toJSON(), el2.toJSON(), el3.querySelector('li a').toJSON()); */
      /* new analyzeHtml().parse(
        null,
        location.origin + location.pathname,
        location.search.substr(1),
        document.body.innerHTML
      ); */
      var view = localStorage.view || 0;
      if (view < 1000) {
        view++;
        localStorage.view = view;
        location.reload();
      }
    </script>
  </body>
</html>
